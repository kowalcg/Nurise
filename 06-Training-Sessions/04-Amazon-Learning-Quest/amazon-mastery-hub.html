<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amazon Mastery Hub - Complete Learning System</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2563eb;
            --primary-light: #3b82f6;
            --primary-dark: #1d4ed8;

            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;

            --purple: #8b5cf6;
            --pink: #ec4899;
            --cyan: #06b6d4;
            --orange: #f97316;
            --gold: #fbbf24;

            --bg: #0f172a;
            --bg-light: #1e293b;
            --bg-lighter: #334155;

            --text: #f8fafc;
            --text-muted: #94a3b8;

            --border: rgba(148, 163, 184, 0.2);
        }

        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }

        body {
            font-family: 'Fredoka', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 20% 50%, rgba(37, 99, 235, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(139, 92, 246, 0.15) 0%, transparent 50%);
            z-index: -1;
        }

        .app {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 300px;
            background: var(--bg-light);
            border-right: 2px solid var(--border);
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 2rem 1.5rem;
            background: linear-gradient(135deg, var(--primary), var(--purple));
            border-bottom: 2px solid var(--border);
        }

        .sidebar-header h1 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .sidebar-header p {
            font-size: 0.875rem;
            opacity: 0.9;
        }

        .progress-stats {
            padding: 1.5rem;
            background: var(--bg-lighter);
            border-bottom: 2px solid var(--border);
        }

        .level-badge {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .level-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--gold), var(--orange));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            box-shadow: 0 4px 16px rgba(251, 191, 36, 0.4);
        }

        .level-info {
            flex: 1;
        }

        .level-title {
            font-size: 0.8rem;
            opacity: 0.7;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .level-number {
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--gold), var(--orange));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav {
            flex: 1;
            padding: 1.5rem 0;
        }

        .nav-section {
            margin-bottom: 2rem;
        }

        .nav-section-title {
            padding: 0 1.5rem;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            opacity: 0.6;
            margin-bottom: 0.75rem;
            font-weight: 600;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 0.875rem 1.5rem;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.3s ease;
            gap: 0.75rem;
            position: relative;
        }

        .nav-item:hover {
            color: var(--text);
            background: rgba(37, 99, 235, 0.1);
            transform: translateX(4px);
        }

        .nav-item.active {
            color: var(--text);
            background: linear-gradient(90deg, rgba(37, 99, 235, 0.2), transparent);
            font-weight: 600;
        }

        .nav-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 60%;
            background: var(--primary);
            border-radius: 0 4px 4px 0;
        }

        .nav-icon {
            font-size: 1.5rem;
            width: 32px;
            text-align: center;
        }

        .nav-badge {
            margin-left: auto;
            background: linear-gradient(135deg, var(--warning), var(--orange));
            color: white;
            font-size: 0.7rem;
            font-weight: 700;
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
        }

        /* Main Content */
        .main {
            margin-left: 300px;
            flex: 1;
            min-height: 100vh;
        }

        .header {
            background: var(--bg-light);
            border-bottom: 2px solid var(--border);
            padding: 2rem 3rem;
            position: sticky;
            top: 0;
            z-index: 50;
            backdrop-filter: blur(10px);
        }

        .header h2 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-light), var(--purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .header p {
            color: var(--text-muted);
            font-size: 1.1rem;
        }

        .content {
            padding: 3rem;
        }

        .view {
            display: none;
        }

        .view.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        .card {
            background: var(--bg-light);
            border-radius: 20px;
            border: 2px solid var(--border);
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .card-header {
            margin-bottom: 1.5rem;
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .card-subtitle {
            color: var(--text-muted);
            font-size: 0.95rem;
        }

        /* Search Bar */
        .search-bar {
            margin-bottom: 2rem;
        }

        .search-input {
            width: 100%;
            background: var(--bg-lighter);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 1rem 1.5rem;
            color: var(--text);
            font-family: inherit;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            background: var(--bg);
        }

        .search-input::placeholder {
            color: var(--text-muted);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .stat-card {
            background: var(--bg-light);
            border: 2px solid var(--border);
            border-radius: 20px;
            padding: 2rem;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-4px);
            border-color: var(--primary);
            box-shadow: 0 12px 36px rgba(37, 99, 235, 0.3);
        }

        .stat-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .stat-value {
            font-size: 3rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-light), var(--purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            color: var(--text-muted);
            font-size: 1rem;
            margin-top: 0.5rem;
        }

        /* SOP Filters */
        .sop-filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            border: 2px solid var(--border);
            background: var(--bg-lighter);
            color: var(--text);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .filter-btn:hover,
        .filter-btn.active {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.2), rgba(139, 92, 246, 0.2));
        }

        /* SOP Grid */
        .sop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
        }

        .sop-card {
            background: var(--bg-lighter);
            border: 2px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .sop-card:hover {
            border-color: var(--primary);
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(37, 99, 235, 0.3);
        }

        .sop-number {
            font-family: 'Space Mono', monospace;
            font-size: 0.9rem;
            color: var(--primary-light);
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .sop-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
        }

        .sop-desc {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .sop-meta {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .meta-tag {
            padding: 0.3rem 0.75rem;
            border-radius: 8px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .meta-tag.time {
            background: rgba(6, 182, 212, 0.2);
            color: var(--cyan);
        }

        .meta-tag.difficulty {
            background: rgba(251, 191, 36, 0.2);
            color: var(--gold);
        }

        .meta-tag.phase {
            background: rgba(139, 92, 246, 0.2);
            color: var(--purple);
        }

        .sop-status {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            background: linear-gradient(135deg, var(--success), #14b8a6);
        }

        .sop-actions {
            display: flex;
            gap: 0.75rem;
        }

        .btn {
            background: linear-gradient(135deg, var(--primary), var(--purple));
            border: none;
            border-radius: 12px;
            padding: 0.75rem 1.5rem;
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 24px rgba(37, 99, 235, 0.5);
        }

        .btn-secondary {
            background: var(--bg);
            border: 2px solid var(--border);
        }

        .btn-secondary:hover {
            border-color: var(--primary);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }

        /* Phase Cards */
        .phase-grid {
            display: grid;
            gap: 2rem;
        }

        .phase-card {
            background: var(--bg-light);
            border: 2px solid var(--border);
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .phase-card:hover {
            border-color: var(--primary);
            transform: translateY(-4px);
            box-shadow: 0 12px 36px rgba(37, 99, 235, 0.3);
        }

        .phase-header {
            padding: 2rem;
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.15), rgba(139, 92, 246, 0.15));
            border-bottom: 2px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .phase-title {
            font-size: 1.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .phase-body {
            padding: 2rem;
        }

        /* Quick Reference Cards */
        .quick-ref-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .quick-ref-card {
            background: var(--bg-lighter);
            border: 2px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .quick-ref-card:hover {
            border-color: var(--primary);
            transform: translateY(-4px);
        }

        .quick-ref-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--primary-light);
        }

        .quick-ref-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .quick-ref-list li {
            padding-left: 1.5rem;
            position: relative;
            color: var(--text-muted);
        }

        .quick-ref-list li::before {
            content: '‚Üí';
            position: absolute;
            left: 0;
            color: var(--primary);
            font-weight: 700;
        }

        /* Interactive Tools Styles */
        .decision-tree {
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(139, 92, 246, 0.1));
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .decision-step {
            margin-bottom: 2rem;
            animation: slideIn 0.5s ease;
        }

        .decision-step.hidden {
            display: none;
        }

        /* Keyword Input Section */
        .keyword-input-section {
            background: rgba(37, 99, 235, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 2px dashed rgba(37, 99, 235, 0.3);
        }

        .keyword-input-wrapper {
            display: flex;
            gap: 1rem;
            align-items: flex-end;
        }

        .keyword-input-group {
            flex: 1;
        }

        .keyword-input-label {
            display: block;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-muted);
        }

        .keyword-input {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid var(--border);
            border-radius: 8px;
            background: var(--bg);
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .keyword-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .add-keyword-btn {
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, var(--primary), var(--purple));
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .add-keyword-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3);
        }

        /* Algorithm Simulator Styles */
        .algo-simulator {
            display: grid;
            gap: 2rem;
        }

        .listing-preview {
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(139, 92, 246, 0.1));
            border-radius: 16px;
            padding: 2rem;
            border: 2px solid rgba(37, 99, 235, 0.2);
        }

        .listing-section {
            margin-bottom: 1.5rem;
        }

        .listing-section-label {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .listing-text {
            background: var(--bg);
            padding: 1rem;
            border-radius: 8px;
            font-size: 0.95rem;
            line-height: 1.6;
            color: var(--text-primary);
            position: relative;
            min-height: 60px;
        }

        .listing-text.editable {
            border: 2px solid var(--border);
            cursor: text;
        }

        .listing-text.editable:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .highlighted-keyword {
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.2), rgba(139, 92, 246, 0.2));
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
            position: relative;
            display: inline-block;
        }

        .keyword-weight {
            position: absolute;
            top: -20px;
            right: -5px;
            background: var(--primary);
            color: white;
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 700;
        }

        .indexing-results {
            background: var(--surface);
            border-radius: 16px;
            padding: 2rem;
            border: 2px solid var(--border);
        }

        .index-table {
            width: 100%;
            border-collapse: collapse;
        }

        .index-table th {
            text-align: left;
            padding: 1rem;
            background: rgba(37, 99, 235, 0.1);
            color: var(--primary-light);
            font-weight: 600;
            border-bottom: 2px solid var(--border);
        }

        .index-table td {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .index-table tr:hover {
            background: rgba(37, 99, 235, 0.05);
        }

        .weight-indicator {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .weight-high {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .weight-medium {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }

        .weight-low {
            background: linear-gradient(135deg, #6b7280, #4b5563);
            color: white;
        }

        .ranking-score {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .algo-controls {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .algo-btn {
            flex: 1;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            border: 2px solid var(--primary);
            background: transparent;
            color: var(--primary);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .algo-btn:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
        }

        .algo-btn.primary {
            background: linear-gradient(135deg, var(--primary), var(--purple));
            color: white;
            border: none;
        }

        .algo-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3);
        }

        .decision-question {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--primary-light);
        }

        .decision-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .decision-option {
            background: var(--bg-light);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .decision-option:hover {
            border-color: var(--primary);
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(37, 99, 235, 0.3);
        }

        .decision-option.selected {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.2), rgba(139, 92, 246, 0.2));
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        .input-label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text);
        }

        .input-field {
            width: 100%;
            background: var(--bg-lighter);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 0.875rem 1rem;
            color: var(--text);
            font-family: inherit;
            font-size: 1rem;
            transition: all 0.2s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary);
            background: var(--bg);
        }

        .btn {
            background: linear-gradient(135deg, var(--primary), var(--purple));
            border: none;
            border-radius: 12px;
            padding: 1rem 2rem;
            color: white;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 24px rgba(37, 99, 235, 0.5);
        }

        .btn-secondary {
            background: var(--bg-lighter);
            color: var(--text);
        }

        .btn-secondary:hover {
            box-shadow: 0 8px 24px rgba(148, 163, 184, 0.3);
        }

        .result-card {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(6, 182, 212, 0.15));
            border: 2px solid var(--success);
            border-radius: 20px;
            padding: 2.5rem;
            margin-top: 2rem;
            animation: slideIn 0.6s ease;
        }

        .result-card.warning {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.15), rgba(249, 115, 22, 0.15));
            border-color: var(--warning);
        }

        .result-card.danger {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(220, 38, 38, 0.15));
            border-color: var(--danger);
        }

        .result-header {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .result-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }

        .result-list li {
            padding-left: 2rem;
            position: relative;
        }

        .result-list li::before {
            content: '‚Üí';
            position: absolute;
            left: 0;
            font-weight: 700;
        }

        /* Ranking Juice Visualizer */
        .juice-visualizer {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .keyword-pool {
            background: var(--bg-lighter);
            border-radius: 16px;
            padding: 1.5rem;
            min-height: 300px;
        }

        .keyword-pool-title {
            font-weight: 600;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .multiplier-badge {
            background: linear-gradient(135deg, var(--warning), var(--orange));
            color: white;
            font-size: 0.8rem;
            font-weight: 700;
            padding: 0.3rem 0.75rem;
            border-radius: 12px;
        }

        .keywords-container {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            min-height: 200px;
            padding: 1rem;
            border: 2px dashed var(--border);
            border-radius: 12px;
        }

        .keyword-chip {
            background: linear-gradient(135deg, var(--primary), var(--purple));
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            cursor: grab;
            transition: all 0.3s ease;
            user-select: none;
        }

        .keyword-chip:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.5);
        }

        .keyword-chip:active {
            cursor: grabbing;
        }

        .juice-scoreboard {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(6, 182, 212, 0.2));
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
        }

        .juice-score {
            font-size: 4rem;
            font-weight: 700;
            font-family: 'Space Mono', monospace;
            background: linear-gradient(135deg, var(--warning), var(--orange));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 1rem 0;
        }

        .juice-breakdown {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 2rem;
        }

        .juice-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            background: var(--bg-light);
            border-radius: 8px;
        }

        .juice-item-value {
            font-weight: 700;
            font-family: 'Space Mono', monospace;
            color: var(--success);
        }

        /* Margin Calculator */
        .calculator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .calculator-inputs {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .slider-group {
            background: var(--bg-lighter);
            border-radius: 12px;
            padding: 1.5rem;
        }

        .slider-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .slider-label {
            font-weight: 600;
        }

        .slider-value {
            font-size: 1.5rem;
            font-weight: 700;
            font-family: 'Space Mono', monospace;
            color: var(--primary-light);
        }

        .slider {
            width: 100%;
            height: 12px;
            border-radius: 6px;
            background: var(--bg);
            outline: none;
            -webkit-appearance: none;
            cursor: pointer;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--purple));
            cursor: grab;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.5);
        }

        .slider::-webkit-slider-thumb:active {
            cursor: grabbing;
        }

        .slider::-moz-range-thumb {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--purple));
            cursor: grab;
            border: none;
        }

        .margin-result {
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.2), rgba(139, 92, 246, 0.2));
            border-radius: 16px;
            padding: 2.5rem;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .margin-value {
            font-size: 5rem;
            font-weight: 700;
            font-family: 'Space Mono', monospace;
            margin: 1rem 0;
        }

        .margin-label {
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            opacity: 0.8;
            margin-bottom: 0.5rem;
        }

        .margin-status {
            font-size: 1.25rem;
            font-weight: 600;
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 12px;
            background: var(--bg-light);
        }

        .margin-breakdown {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 2px solid var(--border);
        }

        .breakdown-row {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 0;
            font-family: 'Space Mono', monospace;
        }

        .breakdown-label {
            color: var(--text-muted);
        }

        .breakdown-value {
            font-weight: 700;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sop-grid {
                grid-template-columns: 1fr;
            }

            .juice-visualizer,
            .calculator-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            .main {
                margin-left: 0;
            }
            .header,
            .content {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>üöÄ Amazon Mastery Hub</h1>
                <p>Complete learning system - 27 SOPs + Training</p>
            </div>

            <!-- Progress Stats -->
            <div class="progress-stats">
                <div class="level-badge">
                    <div class="level-icon">üéØ</div>
                    <div class="level-info">
                        <div class="level-title">Your Progress</div>
                        <div class="level-number">74%</div>
                    </div>
                </div>
            </div>

            <nav class="nav">
                <div class="nav-section">
                    <div class="nav-section-title">üìä Main</div>
                    <div class="nav-item active" data-view="dashboard">
                        <span class="nav-icon">üè†</span>
                        <span>Dashboard</span>
                    </div>
                    <div class="nav-item" data-view="sop-library">
                        <span class="nav-icon">üìö</span>
                        <span>SOP Library</span>
                        <span class="nav-badge">27</span>
                    </div>
                    <div class="nav-item" data-view="datadive-training">
                        <span class="nav-icon">üéì</span>
                        <span>DataDive Training</span>
                        <span class="nav-badge">10</span>
                    </div>
                    <div class="nav-item" data-view="learning-path">
                        <span class="nav-icon">üó∫Ô∏è</span>
                        <span>Learning Path</span>
                    </div>
                    <div class="nav-item" data-view="quick-reference">
                        <span class="nav-icon">‚ö°</span>
                        <span>Quick Reference</span>
                    </div>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">üéØ Interactive Tools</div>
                    <div class="nav-item" data-view="decision-tree">
                        <span class="nav-icon">üå≥</span>
                        <span>Product Evaluator</span>
                    </div>
                    <div class="nav-item" data-view="ranking-juice">
                        <span class="nav-icon">üßÉ</span>
                        <span>Ranking Juice Lab</span>
                    </div>
                    <div class="nav-item" data-view="margin-calculator">
                        <span class="nav-icon">üí∞</span>
                        <span>Margin Calculator</span>
                    </div>
                    <div class="nav-item" data-view="algorithm-sim">
                        <span class="nav-icon">ü§ñ</span>
                        <span>Algorithm Simulator</span>
                    </div>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main">
            <!-- Dashboard View -->
            <div class="view active" id="dashboard">
                <div class="header">
                    <h2>üè† Learning Dashboard</h2>
                    <p>Your complete Amazon seller training system</p>
                </div>

                <div class="content">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üìö</div>
                            <div class="stat-value">27</div>
                            <div class="stat-label">SOPs Available</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üéì</div>
                            <div class="stat-value">10</div>
                            <div class="stat-label">Training Guides</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üîç</div>
                            <div class="stat-value">15</div>
                            <div class="stat-label">Products Analyzed</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">‚úÖ</div>
                            <div class="stat-value">7</div>
                            <div class="stat-label">STRONG GO Products</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <span>üöÄ</span>
                                Quick Start Workflows
                            </div>
                            <div class="card-subtitle">Common tasks and the SOPs you need</div>
                        </div>

                        <div class="quick-ref-grid">
                            <div class="quick-ref-card">
                                <div class="quick-ref-title">üéì Learn DataDive Platform</div>
                                <ul class="quick-ref-list" style="list-style: none; padding: 0;">
                                    <li style="cursor: pointer; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; transition: all 0.3s;" onmouseover="this.style.background='rgba(139, 92, 246, 0.1)'" onmouseout="this.style.background='transparent'" onclick="openTraining('datadive-setup')">
                                        <span style="color: var(--purple); font-weight: 600;">üéì</span> Account Setup
                                    </li>
                                    <li style="cursor: pointer; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; transition: all 0.3s;" onmouseover="this.style.background='rgba(139, 92, 246, 0.1)'" onmouseout="this.style.background='transparent'" onclick="openTraining('datadive-scorecard')">
                                        <span style="color: var(--purple); font-weight: 600;">üéì</span> Product Validation Scorecard
                                    </li>
                                    <li style="cursor: pointer; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; transition: all 0.3s;" onmouseover="this.style.background='rgba(139, 92, 246, 0.1)'" onmouseout="this.style.background='transparent'" onclick="openTraining('datadive-listing-training')">
                                        <span style="color: var(--purple); font-weight: 600;">üéì</span> Listing Builder
                                    </li>
                                    <li style="cursor: pointer; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; transition: all 0.3s;" onmouseover="this.style.background='rgba(139, 92, 246, 0.1)'" onmouseout="this.style.background='transparent'" onclick="openTraining('datadive-rank-radar')">
                                        <span style="color: var(--purple); font-weight: 600;">üéì</span> Rank Radar
                                    </li>
                                </ul>
                            </div>

                            <div class="quick-ref-card">
                                <div class="quick-ref-title">üîç Find New Products</div>
                                <ul class="quick-ref-list" style="list-style: none; padding: 0;">
                                    <li style="cursor: pointer; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; transition: all 0.3s;" onmouseover="this.style.background='rgba(37, 99, 235, 0.1)'" onmouseout="this.style.background='transparent'" onclick="openSOP('201')">
                                        <span style="color: var(--primary); font-weight: 600;">üìÑ</span> SOP-201: Product Research
                                    </li>
                                    <li style="cursor: pointer; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; transition: all 0.3s;" onmouseover="this.style.background='rgba(37, 99, 235, 0.1)'" onmouseout="this.style.background='transparent'" onclick="openSOP('202')">
                                        <span style="color: var(--primary); font-weight: 600;">üìÑ</span> SOP-202: Validate with Scorecard
                                    </li>
                                    <li style="cursor: pointer; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; transition: all 0.3s;" onmouseover="this.style.background='rgba(37, 99, 235, 0.1)'" onmouseout="this.style.background='transparent'" onclick="openSOP('203')">
                                        <span style="color: var(--primary); font-weight: 600;">üìÑ</span> SOP-203: Pipeline Management
                                    </li>
                                    <li style="cursor: pointer; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; transition: all 0.3s;" onmouseover="this.style.background='rgba(37, 99, 235, 0.1)'" onmouseout="this.style.background='transparent'" onclick="openSOP('701')">
                                        <span style="color: var(--primary); font-weight: 600;">üìÑ</span> SOP-701: AI Competitive Analysis
                                    </li>
                                </ul>
                            </div>

                            <div class="quick-ref-card">
                                <div class="quick-ref-title">‚úèÔ∏è Optimize Listing</div>
                                <ul class="quick-ref-list" style="list-style: none; padding: 0;">
                                    <li style="cursor: pointer; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; transition: all 0.3s;" onmouseover="this.style.background='rgba(139, 92, 246, 0.1)'" onmouseout="this.style.background='transparent'" onclick="openTraining('datadive-listing-training')">
                                        <span style="color: var(--purple); font-weight: 600;">üéì</span> Listing Builder Training
                                    </li>
                                    <li style="cursor: pointer; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; transition: all 0.3s;" onmouseover="this.style.background='rgba(37, 99, 235, 0.1)'" onmouseout="this.style.background='transparent'" onclick="openSOP('302')">
                                        <span style="color: var(--primary); font-weight: 600;">üìÑ</span> SOP-302: Keyword Optimization
                                    </li>
                                    <li style="cursor: pointer; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; transition: all 0.3s;" onmouseover="this.style.background='rgba(37, 99, 235, 0.1)'" onmouseout="this.style.background='transparent'" onclick="openSOP('304')">
                                        <span style="color: var(--primary); font-weight: 600;">üìÑ</span> SOP-304: Ranking Juice Builder
                                    </li>
                                    <li style="cursor: pointer; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; transition: all 0.3s;" onmouseover="this.style.background='rgba(37, 99, 235, 0.1)'" onmouseout="this.style.background='transparent'" onclick="openSOP('303')">
                                        <span style="color: var(--primary); font-weight: 600;">üìÑ</span> SOP-303: Update in Seller Central
                                    </li>
                                </ul>
                            </div>

                            <div class="quick-ref-card">
                                <div class="quick-ref-title">üöÄ Launch Product</div>
                                <ul class="quick-ref-list" style="list-style: none; padding: 0;">
                                    <li style="cursor: pointer; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; transition: all 0.3s;" onmouseover="this.style.background='rgba(139, 92, 246, 0.1)'" onmouseout="this.style.background='transparent'" onclick="openTraining('chatgpt-image-creation')">
                                        <span style="color: var(--purple); font-weight: 600;">üéì</span> ChatGPT Image Creation
                                    </li>
                                    <li style="cursor: pointer; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; transition: all 0.3s;" onmouseover="this.style.background='rgba(37, 99, 235, 0.1)'" onmouseout="this.style.background='transparent'" onclick="openSOP('602')">
                                        <span style="color: var(--primary); font-weight: 600;">üìÑ</span> SOP-602: Plan Product Images
                                    </li>
                                    <li style="cursor: pointer; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; transition: all 0.3s;" onmouseover="this.style.background='rgba(37, 99, 235, 0.1)'" onmouseout="this.style.background='transparent'" onclick="openSOP('802')">
                                        <span style="color: var(--primary); font-weight: 600;">üìÑ</span> SOP-802: Create Suppressed Listing
                                    </li>
                                    <li style="cursor: pointer; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; transition: all 0.3s;" onmouseover="this.style.background='rgba(37, 99, 235, 0.1)'" onmouseout="this.style.background='transparent'" onclick="openSOP('901')">
                                        <span style="color: var(--primary); font-weight: 600;">üìÑ</span> SOP-901: Launch Day Timeline
                                    </li>
                                </ul>
                            </div>

                            <div class="quick-ref-card">
                                <div class="quick-ref-title">üîß Fix Problems</div>
                                <ul class="quick-ref-list" style="list-style: none; padding: 0;">
                                    <li style="cursor: pointer; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; transition: all 0.3s;" onmouseover="this.style.background='rgba(139, 92, 246, 0.1)'" onmouseout="this.style.background='transparent'" onclick="openTraining('datadive-troubleshooting')">
                                        <span style="color: var(--purple); font-weight: 600;">üéì</span> Troubleshooting Guide
                                    </li>
                                    <li style="cursor: pointer; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; transition: all 0.3s;" onmouseover="this.style.background='rgba(37, 99, 235, 0.1)'" onmouseout="this.style.background='transparent'" onclick="openSOP('501')">
                                        <span style="color: var(--primary); font-weight: 600;">üìÑ</span> SOP-501: Diagnose Issues
                                    </li>
                                    <li style="cursor: pointer; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; transition: all 0.3s;" onmouseover="this.style.background='rgba(37, 99, 235, 0.1)'" onmouseout="this.style.background='transparent'" onclick="openSOP('502')">
                                        <span style="color: var(--primary); font-weight: 600;">üìÑ</span> SOP-502: Common Fixes
                                    </li>
                                    <li style="cursor: pointer; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; transition: all 0.3s;" onmouseover="this.style.background='rgba(37, 99, 235, 0.1)'" onmouseout="this.style.background='transparent'" onclick="openSOP('1101')">
                                        <span style="color: var(--primary); font-weight: 600;">üìÑ</span> SOP-1101: Check Indexing
                                    </li>
                                </ul>
                            </div>

                            <div class="quick-ref-card">
                                <div class="quick-ref-title">üìà Track Performance</div>
                                <ul class="quick-ref-list" style="list-style: none; padding: 0;">
                                    <li style="cursor: pointer; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; transition: all 0.3s;" onmouseover="this.style.background='rgba(139, 92, 246, 0.1)'" onmouseout="this.style.background='transparent'" onclick="openTraining('datadive-rank-radar')">
                                        <span style="color: var(--purple); font-weight: 600;">üéì</span> Rank Radar Setup
                                    </li>
                                    <li style="cursor: pointer; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; transition: all 0.3s;" onmouseover="this.style.background='rgba(37, 99, 235, 0.1)'" onmouseout="this.style.background='transparent'" onclick="openSOP('401')">
                                        <span style="color: var(--primary); font-weight: 600;">üìÑ</span> SOP-401: Keyword Tracking
                                    </li>
                                    <li style="cursor: pointer; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; transition: all 0.3s;" onmouseover="this.style.background='rgba(37, 99, 235, 0.1)'" onmouseout="this.style.background='transparent'" onclick="openSOP('402')">
                                        <span style="color: var(--primary); font-weight: 600;">üìÑ</span> SOP-402: Weekly Monitoring
                                    </li>
                                    <li style="cursor: pointer; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; transition: all 0.3s;" onmouseover="this.style.background='rgba(37, 99, 235, 0.1)'" onmouseout="this.style.background='transparent'" onclick="openSOP('1102')">
                                        <span style="color: var(--primary); font-weight: 600;">üìÑ</span> SOP-1102: A/B Testing
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SOP Library View -->
            <div class="view" id="sop-library">
                <div class="header">
                    <h2>üìö SOP Library</h2>
                    <p>All 27 Standard Operating Procedures - fully accessible</p>
                </div>

                <div class="content">
                    <div class="search-bar">
                        <input type="text" class="search-input" id="sop-search" placeholder="üîç Search SOPs by name, category, or keyword...">
                    </div>

                    <div class="sop-filters">
                        <button class="filter-btn active" data-filter="all">All SOPs (27)</button>
                        <button class="filter-btn" data-filter="setup">Setup</button>
                        <button class="filter-btn" data-filter="validation">Product Validation</button>
                        <button class="filter-btn" data-filter="listing">Listing Optimization</button>
                        <button class="filter-btn" data-filter="tracking">Keyword Tracking</button>
                        <button class="filter-btn" data-filter="troubleshooting">Troubleshooting</button>
                        <button class="filter-btn" data-filter="images">Images</button>
                        <button class="filter-btn" data-filter="analysis">Product Analysis</button>
                        <button class="filter-btn" data-filter="prelaunch">Pre-Launch</button>
                        <button class="filter-btn" data-filter="launch">Launch</button>
                        <button class="filter-btn" data-filter="ppc">PPC</button>
                        <button class="filter-btn" data-filter="postlaunch">Post-Launch</button>
                    </div>

                    <div class="sop-grid" id="sop-grid">
                        <!-- SOPs will be dynamically inserted here -->
                    </div>
                </div>
            </div>

            <!-- DataDive Training View -->
            <div class="view" id="datadive-training">
                <div class="header">
                    <h2>üéì DataDive Training</h2>
                    <p>Complete DataDive training materials - video transcripts, walkthroughs, and guides</p>
                </div>

                <div class="content">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <span>üéØ</span>
                                Getting Started with DataDive
                            </div>
                            <div class="card-subtitle">Essential setup and account configuration</div>
                        </div>
                        <div class="sop-grid">
                            <div class="sop-card">
                                <div class="sop-status">üìÑ</div>
                                <div class="sop-number">TRAINING-01</div>
                                <div class="sop-title">DataDive Account Setup</div>
                                <div class="sop-desc">Complete guide to setting up your DataDive account, connecting Amazon, and configuring team settings</div>
                                <div class="sop-meta">
                                    <span class="meta-tag time">‚è±Ô∏è 30 min</span>
                                    <span class="meta-tag difficulty">‚≠ê Beginner</span>
                                    <span class="meta-tag phase">Setup</span>
                                </div>
                                <div class="sop-actions">
                                    <button class="btn" onclick="openTraining('datadive-setup')">üìÑ Open PDF</button>
                                    <button class="btn btn-secondary" onclick="openTrainingMD('datadive-setup')">üìù View MD</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <span>üìä</span>
                                Product Research & Validation
                            </div>
                            <div class="card-subtitle">Finding and validating profitable products</div>
                        </div>
                        <div class="sop-grid">
                            <div class="sop-card">
                                <div class="sop-status">üìÑ</div>
                                <div class="sop-number">TRAINING-02</div>
                                <div class="sop-title">Product Validation Scorecard</div>
                                <div class="sop-desc">8-factor scorecard system for evaluating products, GO/NO-GO decision framework</div>
                                <div class="sop-meta">
                                    <span class="meta-tag time">‚è±Ô∏è 45 min</span>
                                    <span class="meta-tag difficulty">‚≠ê Intermediate</span>
                                    <span class="meta-tag phase">Research</span>
                                </div>
                                <div class="sop-actions">
                                    <button class="btn" onclick="openTraining('datadive-scorecard')">üìÑ Open PDF</button>
                                    <button class="btn btn-secondary" onclick="openTrainingMD('datadive-scorecard')">üìù View MD</button>
                                </div>
                            </div>
                            <div class="sop-card">
                                <div class="sop-status">üìÑ</div>
                                <div class="sop-number">TRAINING-03</div>
                                <div class="sop-title">Product Validation Walkthrough</div>
                                <div class="sop-desc">Step-by-step walkthrough of the complete product validation process using real examples</div>
                                <div class="sop-meta">
                                    <span class="meta-tag time">‚è±Ô∏è 60 min</span>
                                    <span class="meta-tag difficulty">‚≠ê Intermediate</span>
                                    <span class="meta-tag phase">Research</span>
                                </div>
                                <div class="sop-actions">
                                    <button class="btn" onclick="openTraining('datadive-walkthrough')">üìÑ Open PDF</button>
                                    <button class="btn btn-secondary" onclick="openTrainingMD('datadive-walkthrough')">üìù View MD</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <span>‚úèÔ∏è</span>
                                Listing Creation & Optimization
                            </div>
                            <div class="card-subtitle">Build high-converting, SEO-optimized listings</div>
                        </div>
                        <div class="sop-grid">
                            <div class="sop-card">
                                <div class="sop-status">üìÑ</div>
                                <div class="sop-number">TRAINING-04</div>
                                <div class="sop-title">Listing Builder Training</div>
                                <div class="sop-desc">Master the DataDive Listing Builder tool - ranking juice, AI copywriter, keyword placement</div>
                                <div class="sop-meta">
                                    <span class="meta-tag time">‚è±Ô∏è 90 min</span>
                                    <span class="meta-tag difficulty">‚≠ê Intermediate</span>
                                    <span class="meta-tag phase">Listing</span>
                                </div>
                                <div class="sop-actions">
                                    <button class="btn" onclick="openTraining('datadive-listing-training')">üìÑ Open PDF</button>
                                    <button class="btn btn-secondary" onclick="openTrainingMD('datadive-listing-training')">üìù View MD</button>
                                </div>
                            </div>
                            <div class="sop-card">
                                <div class="sop-status">üìÑ</div>
                                <div class="sop-number">TRAINING-05</div>
                                <div class="sop-title">Listing Builder Reference Guide</div>
                                <div class="sop-desc">Quick reference guide and video transcripts for the Listing Builder tool</div>
                                <div class="sop-meta">
                                    <span class="meta-tag time">‚è±Ô∏è Reference</span>
                                    <span class="meta-tag difficulty">‚≠ê All Levels</span>
                                    <span class="meta-tag phase">Listing</span>
                                </div>
                                <div class="sop-actions">
                                    <button class="btn" onclick="openTraining('datadive-listing-builder')">üìÑ Open PDF</button>
                                    <button class="btn btn-secondary" onclick="openTrainingMD('datadive-listing-builder')">üìù View MD</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <span>üìà</span>
                                Tracking & Monitoring
                            </div>
                            <div class="card-subtitle">Monitor keyword rankings and performance</div>
                        </div>
                        <div class="sop-grid">
                            <div class="sop-card">
                                <div class="sop-status">üìÑ</div>
                                <div class="sop-number">TRAINING-06</div>
                                <div class="sop-title">Rank Radar Training</div>
                                <div class="sop-desc">Set up and use Rank Radar to track keyword positions and organic ranking performance</div>
                                <div class="sop-meta">
                                    <span class="meta-tag time">‚è±Ô∏è 45 min</span>
                                    <span class="meta-tag difficulty">‚≠ê Beginner</span>
                                    <span class="meta-tag phase">Tracking</span>
                                </div>
                                <div class="sop-actions">
                                    <button class="btn" onclick="openTraining('datadive-rank-radar')">üìÑ Open PDF</button>
                                    <button class="btn btn-secondary" onclick="openTrainingMD('datadive-rank-radar')">üìù View MD</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <span>üîß</span>
                                Advanced Training & Troubleshooting
                            </div>
                            <div class="card-subtitle">Deep-dive training and problem solving</div>
                        </div>
                        <div class="sop-grid">
                            <div class="sop-card">
                                <div class="sop-status">üìÑ</div>
                                <div class="sop-number">TRAINING-07</div>
                                <div class="sop-title">Complete Training Notes</div>
                                <div class="sop-desc">Comprehensive training notes covering all DataDive features and workflows</div>
                                <div class="sop-meta">
                                    <span class="meta-tag time">‚è±Ô∏è Reference</span>
                                    <span class="meta-tag difficulty">‚≠ê All Levels</span>
                                    <span class="meta-tag phase">Advanced</span>
                                </div>
                                <div class="sop-actions">
                                    <button class="btn" onclick="openTraining('datadive-training-notes')">üìÑ Open PDF</button>
                                    <button class="btn btn-secondary" onclick="openTrainingMD('datadive-training-notes')">üìù View MD</button>
                                </div>
                            </div>
                            <div class="sop-card">
                                <div class="sop-status">üìÑ</div>
                                <div class="sop-number">TRAINING-08</div>
                                <div class="sop-title">Troubleshooting & Diagnostics</div>
                                <div class="sop-desc">Diagnose and fix common DataDive issues, browse node problems, indexing errors</div>
                                <div class="sop-meta">
                                    <span class="meta-tag time">‚è±Ô∏è 60 min</span>
                                    <span class="meta-tag difficulty">‚≠ê Advanced</span>
                                    <span class="meta-tag phase">Advanced</span>
                                </div>
                                <div class="sop-actions">
                                    <button class="btn" onclick="openTraining('datadive-troubleshooting')">üìÑ Open PDF</button>
                                    <button class="btn btn-secondary" onclick="openTrainingMD('datadive-troubleshooting')">üìù View MD</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <span>üé®</span>
                                Creative Tools
                            </div>
                            <div class="card-subtitle">AI-powered image creation and design</div>
                        </div>
                        <div class="sop-grid">
                            <div class="sop-card">
                                <div class="sop-status">üìÑ</div>
                                <div class="sop-number">TRAINING-09</div>
                                <div class="sop-title">ChatGPT 4o Image Creation</div>
                                <div class="sop-desc">Create professional Amazon product images using ChatGPT 4o - prompts, techniques, and workflows</div>
                                <div class="sop-meta">
                                    <span class="meta-tag time">‚è±Ô∏è 120 min</span>
                                    <span class="meta-tag difficulty">‚≠ê Intermediate</span>
                                    <span class="meta-tag phase">Creative</span>
                                </div>
                                <div class="sop-actions">
                                    <button class="btn" onclick="openTraining('chatgpt-image-creation')">üìÑ Open PDF</button>
                                    <button class="btn btn-secondary" onclick="openTrainingMD('chatgpt-image-creation')">üìù View MD</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <span>üåê</span>
                                External Resources
                            </div>
                            <div class="card-subtitle">Official DataDive documentation and support</div>
                        </div>
                        <div style="display: grid; gap: 1rem;">
                            <a href="https://support.datadive.tools/hc/en-us" target="_blank" style="text-decoration: none; color: inherit;">
                                <div style="background: var(--bg-lighter); padding: 1.5rem; border-radius: 16px; border: 2px solid var(--border); transition: all 0.3s ease; cursor: pointer;">
                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                        <div style="font-size: 2rem;">üìö</div>
                                        <div>
                                            <div style="font-weight: 700; margin-bottom: 0.25rem;">Main Documentation Hub</div>
                                            <div style="color: var(--text-muted); font-size: 0.9rem;">Complete DataDive support center</div>
                                        </div>
                                    </div>
                                </div>
                            </a>
                            <a href="https://support.datadive.tools/hc/en-us/categories/17548657550745-Essentials" target="_blank" style="text-decoration: none; color: inherit;">
                                <div style="background: var(--bg-lighter); padding: 1.5rem; border-radius: 16px; border: 2px solid var(--border); transition: all 0.3s ease; cursor: pointer;">
                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                        <div style="font-size: 2rem;">üéØ</div>
                                        <div>
                                            <div style="font-weight: 700; margin-bottom: 0.25rem;">Essentials (Start Here)</div>
                                            <div style="color: var(--text-muted); font-size: 0.9rem;">Getting started & basic features</div>
                                        </div>
                                    </div>
                                </div>
                            </a>
                            <a href="https://support.datadive.tools/hc/en-us/categories/17548740872601-Advanced" target="_blank" style="text-decoration: none; color: inherit;">
                                <div style="background: var(--bg-lighter); padding: 1.5rem; border-radius: 16px; border: 2px solid var(--border); transition: all 0.3s ease; cursor: pointer;">
                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                        <div style="font-size: 2rem;">üöÄ</div>
                                        <div>
                                            <div style="font-weight: 700; margin-bottom: 0.25rem;">Advanced Features</div>
                                            <div style="color: var(--text-muted); font-size: 0.9rem;">Power user techniques & tools</div>
                                        </div>
                                    </div>
                                </div>
                            </a>
                            <a href="https://www.youtube.com/@datadivetools/videos" target="_blank" style="text-decoration: none; color: inherit;">
                                <div style="background: var(--bg-lighter); padding: 1.5rem; border-radius: 16px; border: 2px solid var(--border); transition: all 0.3s ease; cursor: pointer;">
                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                        <div style="font-size: 2rem;">üì∫</div>
                                        <div>
                                            <div style="font-weight: 700; margin-bottom: 0.25rem;">YouTube Channel</div>
                                            <div style="color: var(--text-muted); font-size: 0.9rem;">Video tutorials & walkthroughs</div>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Learning Path View -->
            <div class="view" id="learning-path">
                <div class="header">
                    <h2>üó∫Ô∏è Learning Path</h2>
                    <p>Progressive journey through 5 phases of Amazon mastery</p>
                </div>

                <div class="content">
                    <div class="phase-grid" id="phases-container">
                        <!-- Phases will be dynamically inserted -->
                    </div>
                </div>
            </div>

            <!-- Quick Reference View -->
            <div class="view" id="quick-reference">
                <div class="header">
                    <h2>‚ö° Quick Reference</h2>
                    <p>Fast answers to common questions</p>
                </div>

                <div class="content">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <span>üîë</span>
                                Key Concepts
                            </div>
                        </div>

                        <div style="display: grid; gap: 2rem;">
                            <div>
                                <h3 style="color: var(--primary-light); margin-bottom: 1rem; font-size: 1.3rem;">üìä GO/NO-GO Decision Framework</h3>
                                <div style="background: var(--bg-lighter); padding: 1.5rem; border-radius: 12px; border-left: 4px solid var(--success);">
                                    <div style="font-weight: 700; margin-bottom: 0.5rem;">‚úÖ STRONG GO: 16%+ margin</div>
                                    <div style="color: var(--text-muted);">Clear green light - proceed with confidence</div>
                                </div>
                                <div style="background: var(--bg-lighter); padding: 1.5rem; border-radius: 12px; border-left: 4px solid var(--warning); margin-top: 1rem;">
                                    <div style="font-weight: 700; margin-bottom: 0.5rem;">‚ö†Ô∏è CONDITIONAL GO: 15% margin</div>
                                    <div style="color: var(--text-muted);">Proceed only with strategic advantages</div>
                                </div>
                                <div style="background: var(--bg-lighter); padding: 1.5rem; border-radius: 12px; border-left: 4px solid var(--danger); margin-top: 1rem;">
                                    <div style="font-weight: 700; margin-bottom: 0.5rem;">‚ùå NO GO: <15% margin</div>
                                    <div style="color: var(--text-muted);">Don't launch - margins too thin</div>
                                </div>
                            </div>

                            <div>
                                <h3 style="color: var(--primary-light); margin-bottom: 1rem; font-size: 1.3rem;">üßÉ Ranking Juice Multipliers</h3>
                                <div style="background: var(--bg-lighter); padding: 1.5rem; border-radius: 12px;">
                                    <div style="display: grid; gap: 1rem;">
                                        <div style="display: flex; justify-content: space-between; align-items: center;">
                                            <span>üìç Title (Exact Match)</span>
                                            <span style="font-weight: 700; color: var(--success); font-size: 1.3rem;">10x</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; align-items: center;">
                                            <span>üìù Bullets (Phrase Match)</span>
                                            <span style="font-weight: 700; color: var(--warning); font-size: 1.3rem;">5x</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; align-items: center;">
                                            <span>üìÑ Description (Broad Match)</span>
                                            <span style="font-weight: 700; color: var(--text-muted); font-size: 1.3rem;">1x</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div>
                                <h3 style="color: var(--primary-light); margin-bottom: 1rem; font-size: 1.3rem;">üöö Freight Allocation</h3>
                                <div style="background: var(--bg-lighter); padding: 1.5rem; border-radius: 12px;">
                                    <div style="font-weight: 700; margin-bottom: 0.75rem;">Flat Rate Calculation:</div>
                                    <div style="font-family: 'Space Mono', monospace; color: var(--primary-light); font-size: 1.2rem; margin-bottom: 0.5rem;">
                                        $3,500 √∑ 700 units = $5 per unit
                                    </div>
                                    <div style="color: var(--text-muted);">Always include freight allocation in your margin calculations!</div>
                                </div>
                            </div>

                            <div>
                                <h3 style="color: var(--primary-light); margin-bottom: 1rem; font-size: 1.3rem;">‚ö†Ô∏è Common Myths Debunked</h3>
                                <div style="background: linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(220, 38, 38, 0.15)); padding: 1.5rem; border-radius: 12px; border-left: 4px solid var(--danger);">
                                    <div style="font-weight: 700; margin-bottom: 0.75rem; color: var(--danger);">MYTH: 1000 characters per bullet</div>
                                    <div style="color: var(--text); margin-bottom: 0.5rem; font-weight: 600;">FACT: 1000 characters TOTAL across all 5 bullets combined</div>
                                    <div style="color: var(--text-muted);">This is one of the most misunderstood indexing rules - see SOP-305 for details</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Interactive Tools -->
            <div class="view" id="decision-tree">
                <div class="header">
                    <h2>üå≥ Product Evaluator</h2>
                    <p>Interactive GO/NO-GO decision system based on the 8-factor scorecard methodology</p>
                </div>

                <div class="content">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üéØ</div>
                            <div class="stat-value">15</div>
                            <div class="stat-label">Products Evaluated</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">‚úÖ</div>
                            <div class="stat-value">7</div>
                            <div class="stat-label">STRONG GO</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">‚ö†Ô∏è</div>
                            <div class="stat-value">3</div>
                            <div class="stat-label">Conditional</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">‚ùå</div>
                            <div class="stat-value">5</div>
                            <div class="stat-label">NO GO</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <span>üìä</span>
                                Evaluate Your Product
                            </div>
                            <div class="card-subtitle">Answer these questions to get a data-driven GO/NO-GO recommendation</div>
                        </div>

                        <div class="decision-tree">
                            <!-- Step 1: Product Name -->
                            <div class="decision-step" id="step1">
                                <div class="decision-question">1Ô∏è‚É£ What product are you evaluating?</div>
                                <div class="input-group">
                                    <label class="input-label">Product Name</label>
                                    <input type="text" class="input-field" id="product-name" placeholder="e.g., Coleman Air Mattress, Bestway Pool Filter">
                                </div>
                                <button class="btn" onclick="nextStep(2)">Continue ‚Üí</button>
                            </div>

                            <!-- Step 2: Selling Price -->
                            <div class="decision-step hidden" id="step2">
                                <div class="decision-question">2Ô∏è‚É£ What's your planned selling price?</div>
                                <div class="input-group">
                                    <label class="input-label">Selling Price (CAD)</label>
                                    <input type="number" class="input-field" id="selling-price" placeholder="e.g., 49.99">
                                </div>
                                <div style="display: flex; gap: 1rem;">
                                    <button class="btn btn-secondary" onclick="prevStep(1)">‚Üê Back</button>
                                    <button class="btn" onclick="nextStep(3)">Continue ‚Üí</button>
                                </div>
                            </div>

                            <!-- Step 3: Product Cost -->
                            <div class="decision-step hidden" id="step3">
                                <div class="decision-question">3Ô∏è‚É£ What's your product cost?</div>
                                <div class="input-group">
                                    <label class="input-label">Product Cost (CAD)</label>
                                    <input type="number" class="input-field" id="product-cost" placeholder="e.g., 22.50">
                                </div>
                                <div class="tip-box">
                                    <div class="tip-title">üí° Training Reminder</div>
                                    <div>Include your supplier cost + freight allocation. For flat-rate shipping (700 units @ $3,500), that's ~$5 per unit. See DataDive Product Validation training for details.</div>
                                </div>
                                <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                                    <button class="btn btn-secondary" onclick="prevStep(2)">‚Üê Back</button>
                                    <button class="btn" onclick="nextStep(4)">Continue ‚Üí</button>
                                </div>
                            </div>

                            <!-- Step 4: Amazon Fees -->
                            <div class="decision-step hidden" id="step4">
                                <div class="decision-question">4Ô∏è‚É£ What are your Amazon fees?</div>
                                <div class="input-group">
                                    <label class="input-label">Amazon Fees (CAD)</label>
                                    <input type="number" class="input-field" id="amazon-fees" placeholder="e.g., 12.75">
                                </div>
                                <div class="tip-box">
                                    <div class="tip-title">üí° Training Reminder</div>
                                    <div>Amazon fees typically run 15-30% of selling price. Use Amazon's FBA calculator for accuracy. Reference SOP-202 for validation methodology.</div>
                                </div>
                                <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                                    <button class="btn btn-secondary" onclick="prevStep(3)">‚Üê Back</button>
                                    <button class="btn" onclick="nextStep(5)">Continue ‚Üí</button>
                                </div>
                            </div>

                            <!-- Step 5: Competition -->
                            <div class="decision-step hidden" id="step5">
                                <div class="decision-question">5Ô∏è‚É£ How many direct competitors exist?</div>
                                <div class="decision-options">
                                    <div class="decision-option" onclick="selectOption('competition', 'low')">
                                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">üòä</div>
                                        <div style="font-weight: 600;">Low (1-5)</div>
                                    </div>
                                    <div class="decision-option" onclick="selectOption('competition', 'medium')">
                                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">ü§î</div>
                                        <div style="font-weight: 600;">Medium (6-15)</div>
                                    </div>
                                    <div class="decision-option" onclick="selectOption('competition', 'high')">
                                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">üò∞</div>
                                        <div style="font-weight: 600;">High (16+)</div>
                                    </div>
                                </div>
                                <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                                    <button class="btn btn-secondary" onclick="prevStep(4)">‚Üê Back</button>
                                    <button class="btn" onclick="nextStep(6)">Continue ‚Üí</button>
                                </div>
                            </div>

                            <!-- Step 6: Brand Approval -->
                            <div class="decision-step hidden" id="step6">
                                <div class="decision-question">6Ô∏è‚É£ Do you need brand approval to sell this?</div>
                                <div class="decision-options">
                                    <div class="decision-option" onclick="selectOption('brand', 'no')">
                                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">‚úÖ</div>
                                        <div style="font-weight: 600;">No Approval Needed</div>
                                    </div>
                                    <div class="decision-option" onclick="selectOption('brand', 'pending')">
                                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">‚è≥</div>
                                        <div style="font-weight: 600;">Approval Pending</div>
                                    </div>
                                    <div class="decision-option" onclick="selectOption('brand', 'required')">
                                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">üö´</div>
                                        <div style="font-weight: 600;">Required, Not Applied</div>
                                    </div>
                                </div>
                                <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                                    <button class="btn btn-secondary" onclick="prevStep(5)">‚Üê Back</button>
                                    <button class="btn" onclick="calculateDecision()">Get Recommendation üéØ</button>
                                </div>
                            </div>

                            <!-- Result -->
                            <div id="decision-result"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="view" id="ranking-juice">
                <div class="header">
                    <h2>üßÉ Ranking Juice Lab</h2>
                    <p>Drag keywords to see how placement affects your ranking power</p>
                </div>

                <div class="content">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <span>üéØ</span>
                                Interactive Keyword Placement
                            </div>
                            <div class="card-subtitle">Add your own keywords or drag the existing ones between Title, Bullets, and Description to see real-time ranking juice changes</div>
                        </div>

                        <!-- Keyword Input Section -->
                        <div class="keyword-input-section">
                            <div class="keyword-input-wrapper">
                                <div class="keyword-input-group">
                                    <label class="keyword-input-label">Add Your Own Keyword</label>
                                    <input type="text" class="keyword-input" id="custom-keyword-input" placeholder="e.g., pool pump, water filter, spa accessories">
                                </div>
                                <div class="keyword-input-group" style="max-width: 200px;">
                                    <label class="keyword-input-label">Monthly Searches</label>
                                    <input type="number" class="keyword-input" id="custom-keyword-volume" placeholder="e.g., 5000" value="2000">
                                </div>
                                <button class="add-keyword-btn" onclick="addCustomKeyword()">
                                    + Add Keyword
                                </button>
                            </div>
                            <div style="margin-top: 0.75rem; font-size: 0.85rem; color: var(--text-muted);">
                                üí° Type a keyword phrase and click "Add Keyword" to create a draggable chip. Then drag it to Title, Bullets, or Description to see the ranking juice impact.
                            </div>
                        </div>

                        <div class="juice-visualizer">
                            <div>
                                <div class="keyword-pool" id="title-pool">
                                    <div class="keyword-pool-title">
                                        <span>üìç Title (Exact Match)</span>
                                        <span class="multiplier-badge">10x Multiplier</span>
                                    </div>
                                    <div class="keywords-container" data-zone="title" ondrop="drop(event)" ondragover="allowDrop(event)">
                                        <div class="keyword-chip" draggable="true" ondragstart="drag(event)" id="kw1" data-volume="5000">pool filter</div>
                                    </div>
                                </div>

                                <div class="keyword-pool" id="bullets-pool" style="margin-top: 1rem;">
                                    <div class="keyword-pool-title">
                                        <span>üìù Bullets (Phrase Match)</span>
                                        <span class="multiplier-badge">5x Multiplier</span>
                                    </div>
                                    <div class="keywords-container" data-zone="bullets" ondrop="drop(event)" ondragover="allowDrop(event)">
                                        <div class="keyword-chip" draggable="true" ondragstart="drag(event)" id="kw2" data-volume="3000">replacement filter</div>
                                        <div class="keyword-chip" draggable="true" ondragstart="drag(event)" id="kw3" data-volume="2500">spa filter cartridge</div>
                                    </div>
                                </div>

                                <div class="keyword-pool" id="description-pool" style="margin-top: 1rem;">
                                    <div class="keyword-pool-title">
                                        <span>üìÑ Description (Broad Match)</span>
                                        <span class="multiplier-badge">1x Multiplier</span>
                                    </div>
                                    <div class="keywords-container" data-zone="description" ondrop="drop(event)" ondragover="allowDrop(event)">
                                        <div class="keyword-chip" draggable="true" ondragstart="drag(event)" id="kw4" data-volume="1500">water filtration</div>
                                        <div class="keyword-chip" draggable="true" ondragstart="drag(event)" id="kw5" data-volume="1000">pool maintenance</div>
                                    </div>
                                </div>
                            </div>

                            <div class="juice-scoreboard">
                                <div style="font-size: 1rem; opacity: 0.8; margin-bottom: 0.5rem;">TOTAL RANKING JUICE</div>
                                <div class="juice-score" id="total-juice">85,500</div>
                                <div style="color: var(--text-muted); margin-top: 0.5rem;">Higher is better! üöÄ</div>

                                <div class="juice-breakdown">
                                    <div class="juice-item">
                                        <span>üìç Title Juice</span>
                                        <span class="juice-item-value" id="title-juice">50,000</span>
                                    </div>
                                    <div class="juice-item">
                                        <span>üìù Bullets Juice</span>
                                        <span class="juice-item-value" id="bullets-juice">27,500</span>
                                    </div>
                                    <div class="juice-item">
                                        <span>üìÑ Description Juice</span>
                                        <span class="juice-item-value" id="description-juice">2,500</span>
                                    </div>
                                </div>

                                <div class="tip-box" style="text-align: left;">
                                    <div class="tip-title">üí° Training Insight</div>
                                    <div>Exact match keywords in the title are 10x more powerful than in the description! See SOP-304 Listing Builder guide for optimal keyword placement strategies.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="view" id="margin-calculator">
                <div class="header">
                    <h2>üí∞ Margin Calculator</h2>
                    <p>Calculate your FBA margins with freight allocation - aligned with Product Validation Scorecard</p>
                </div>

                <div class="content">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <span>üìä</span>
                                FBA Margin Calculator
                            </div>
                            <div class="card-subtitle">Adjust the sliders to see real-time margin calculations and GO/NO-GO recommendations</div>
                        </div>

                        <div class="calculator-grid">
                            <div class="calculator-inputs">
                                <div class="slider-group">
                                    <div class="slider-header">
                                        <span class="slider-label">üíµ Selling Price</span>
                                        <span class="slider-value">$<span id="calc-price-display">50.00</span></span>
                                    </div>
                                    <input type="range" class="slider" id="calc-price" min="10" max="200" value="50" step="0.5">
                                </div>

                                <div class="slider-group">
                                    <div class="slider-header">
                                        <span class="slider-label">üì¶ Product Cost</span>
                                        <span class="slider-value">$<span id="calc-cost-display">20.00</span></span>
                                    </div>
                                    <input type="range" class="slider" id="calc-cost" min="5" max="100" value="20" step="0.5">
                                </div>

                                <div class="slider-group">
                                    <div class="slider-header">
                                        <span class="slider-label">üè∑Ô∏è Amazon Fees</span>
                                        <span class="slider-value">$<span id="calc-fees-display">12.00</span></span>
                                    </div>
                                    <input type="range" class="slider" id="calc-fees" min="2" max="50" value="12" step="0.5">
                                </div>

                                <div class="slider-group">
                                    <div class="slider-header">
                                        <span class="slider-label">üöö Freight per Unit</span>
                                        <span class="slider-value">$<span id="calc-freight-display">5.00</span></span>
                                    </div>
                                    <input type="range" class="slider" id="calc-freight" min="0" max="20" value="5" step="0.5">
                                    <div style="font-size: 0.8rem; color: var(--text-muted); margin-top: 0.5rem;">Flat rate: $3,500 √∑ 700 units = $5/unit</div>
                                </div>
                            </div>

                            <div class="margin-result">
                                <div class="margin-label">Net Margin</div>
                                <div class="margin-value" id="calc-margin">26%</div>
                                <div class="margin-status" id="calc-status">‚úÖ STRONG GO - Above 16% threshold!</div>

                                <div class="margin-breakdown">
                                    <div class="breakdown-row">
                                        <span class="breakdown-label">Selling Price:</span>
                                        <span class="breakdown-value">$<span id="breakdown-price">50.00</span></span>
                                    </div>
                                    <div class="breakdown-row">
                                        <span class="breakdown-label">Product Cost:</span>
                                        <span class="breakdown-value" style="color: var(--danger);">-$<span id="breakdown-cost">20.00</span></span>
                                    </div>
                                    <div class="breakdown-row">
                                        <span class="breakdown-label">Amazon Fees:</span>
                                        <span class="breakdown-value" style="color: var(--danger);">-$<span id="breakdown-fees">12.00</span></span>
                                    </div>
                                    <div class="breakdown-row">
                                        <span class="breakdown-label">Freight:</span>
                                        <span class="breakdown-value" style="color: var(--danger);">-$<span id="breakdown-freight">5.00</span></span>
                                    </div>
                                    <div class="breakdown-row" style="border-top: 2px solid var(--border); margin-top: 0.5rem; padding-top: 0.75rem;">
                                        <span class="breakdown-label" style="font-weight: 700; color: var(--text);">Net Profit:</span>
                                        <span class="breakdown-value" style="color: var(--success); font-size: 1.25rem;">$<span id="breakdown-profit">13.00</span></span>
                                    </div>
                                </div>

                                <div class="tip-box" style="text-align: left; margin-top: 2rem;">
                                    <div class="tip-title">üìè Decision Framework</div>
                                    <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
                                        <li>‚â•16% = <strong>STRONG GO</strong></li>
                                        <li>‚â•15% = <strong>CONDITIONAL GO</strong></li>
                                        <li>&lt;15% = <strong>NO GO</strong></li>
                                    </ul>
                                    <div style="margin-top: 1rem; font-size: 0.9rem; color: var(--text-muted);">From DataDive Product Validation Scorecard training</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="view" id="algorithm-sim">
                <div class="header">
                    <h2>ü§ñ Algorithm Simulator</h2>
                    <p>See how Amazon indexes and ranks listings</p>
                </div>
                <div class="content">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <span>üîç</span>
                                Amazon A9 Algorithm - How Indexing Works
                            </div>
                            <div class="card-subtitle">Edit the listing sections below and click "Analyze Indexing" to see how Amazon reads and weights your keywords</div>
                        </div>

                        <div class="algo-simulator">
                            <div class="listing-preview">
                                <h3 style="margin-bottom: 1.5rem; color: var(--primary-light);">üìù Your Amazon Listing</h3>

                                <div class="listing-section">
                                    <div class="listing-section-label">
                                        <span>üìç</span> TITLE (10x Ranking Weight)
                                    </div>
                                    <div class="listing-text editable" contenteditable="true" id="sim-title">
                                        Premium Pool Filter Replacement Cartridge - Compatible with Intex Type A - Easy Clean Reusable Filter
                                    </div>
                                </div>

                                <div class="listing-section">
                                    <div class="listing-section-label">
                                        <span>üìù</span> BULLET POINTS (5x Ranking Weight)
                                    </div>
                                    <div class="listing-text editable" contenteditable="true" id="sim-bullets">
                                        ‚Ä¢ Universal pool filter compatible with most Intex pools<br>
                                        ‚Ä¢ Easy to install replacement filter cartridge<br>
                                        ‚Ä¢ Reusable and washable for long-lasting pool maintenance<br>
                                        ‚Ä¢ Premium filtration keeps your swimming pool crystal clear<br>
                                        ‚Ä¢ Cost-effective alternative to disposable pool filters
                                    </div>
                                </div>

                                <div class="listing-section">
                                    <div class="listing-section-label">
                                        <span>üìÑ</span> DESCRIPTION (1x Ranking Weight)
                                    </div>
                                    <div class="listing-text editable" contenteditable="true" id="sim-description">
                                        Keep your above ground pool sparkling clean with our high-quality filter system. This spa and pool cleaning accessory is designed for maximum water filtration efficiency. Perfect for pool owners who want crystal clear water without constantly replacing cartridges.
                                    </div>
                                </div>

                                <div class="algo-controls">
                                    <button class="algo-btn primary" onclick="analyzeIndexing()">
                                        üîç Analyze Indexing
                                    </button>
                                    <button class="algo-btn" onclick="resetListing()">
                                        ‚Ü∫ Reset to Default
                                    </button>
                                </div>
                            </div>

                            <div class="indexing-results" id="indexing-results" style="display: none;">
                                <h3 style="margin-bottom: 1rem; color: var(--primary-light);">üéØ Amazon's Index Analysis</h3>
                                <p style="color: var(--text-muted); margin-bottom: 1.5rem;">Here's how Amazon's A9 algorithm reads your listing:</p>

                                <div style="margin-bottom: 2rem;">
                                    <div style="font-size: 0.9rem; font-weight: 600; color: var(--text-muted); margin-bottom: 0.5rem;">TOTAL RANKING POWER</div>
                                    <div class="ranking-score" id="total-ranking-score">0</div>
                                </div>

                                <table class="index-table">
                                    <thead>
                                        <tr>
                                            <th>Keyword Found</th>
                                            <th>Location(s)</th>
                                            <th>Weight</th>
                                            <th>Ranking Power</th>
                                        </tr>
                                    </thead>
                                    <tbody id="index-results-body">
                                        <!-- Results will be populated here -->
                                    </tbody>
                                </table>

                                <div class="tip-box" style="margin-top: 2rem;">
                                    <div class="tip-title">üí° Key Insights from SOP-304</div>
                                    <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
                                        <li><strong>Title keywords are 10x more powerful</strong> - Always put your primary keywords in the title</li>
                                        <li><strong>Bullets get 5x weight</strong> - Use all 5 bullet points with unique keyword phrases</li>
                                        <li><strong>Description is 1x</strong> - Good for long-tail keywords and context</li>
                                        <li><strong>Exact match beats phrase match</strong> - "pool filter" ranks higher than "pool filtration filter"</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Base path to SOPs (relative to this HTML file)
        const SOP_BASE_PATH = '../../01-SOPs/';

        // Complete SOP Database
        const sopsDatabase = {
            '101': {
                category: 'setup',
                title: 'DataDive Account Setup',
                desc: 'Initial account configuration, Amazon connection, and team setup',
                time: '30 min',
                difficulty: 'Beginner',
                phase: 1,
                path: '01-setup/SOP-101-DataDive-Account-Setup.md'
            },
            '201': {
                category: 'validation',
                title: 'Product Research & Discovery',
                desc: 'Finding products by price point, initial category research',
                time: '15 min',
                difficulty: 'Beginner',
                phase: 1,
                path: '02-product-validation/SOP-201-Product-Research-Discovery.md'
            },
            '202': {
                category: 'validation',
                title: 'Product Validation Complete',
                desc: 'Full 10-minute validation using the 8-factor scorecard, GO/NO-GO decision framework',
                time: '10 min',
                difficulty: 'Intermediate',
                phase: 1,
                path: '02-product-validation/SOP-202-Product-Validation-Complete.md'
            },
            '203': {
                category: 'validation',
                title: 'Pipeline Management',
                desc: 'Organizing validated products, comparing scores, prioritizing launches',
                time: '20 min',
                difficulty: 'Beginner',
                phase: 1,
                path: '02-product-validation/SOP-203-Pipeline-Management.md'
            },
            '301': {
                category: 'listing',
                title: 'Listing Analysis',
                desc: 'Import listing, identify gaps, compare to competitors',
                time: '20 min',
                difficulty: 'Beginner',
                phase: 2,
                path: '03-listing-optimization/SOP-301-Listing-Analysis.md'
            },
            '302': {
                category: 'listing',
                title: 'Keyword Optimization',
                desc: 'Add missing keywords, convert broad to exact match, maximize coverage',
                time: '30 min',
                difficulty: 'Intermediate',
                phase: 2,
                path: '03-listing-optimization/SOP-302-Keyword-Optimization.md'
            },
            '303': {
                category: 'listing',
                title: 'Listing Update Process',
                desc: 'Safely implement changes in Seller Central without breaking indexing',
                time: '15 min',
                difficulty: 'Beginner',
                phase: 2,
                path: '03-listing-optimization/SOP-303-Listing-Update-Process.md'
            },
            '304': {
                category: 'listing',
                title: 'Listing Builder Complete Guide',
                desc: 'Ranking juice system, AI Copywriter, title optimization, building from scratch',
                time: '60 min',
                difficulty: 'Intermediate',
                phase: 2,
                path: '03-listing-optimization/SOP-304-Listing-Builder-Complete-Guide.md'
            },
            '305': {
                category: 'listing',
                title: 'Amazon Indexing Mechanics',
                desc: 'Character limits, indexing hierarchy, A+ Content, forbidden keywords, testing methods',
                time: '120 min',
                difficulty: 'Advanced',
                phase: 2,
                path: '03-listing-optimization/SOP-305-Amazon-Indexing-Mechanics.md'
            },
            '306': {
                category: 'listing',
                title: 'Amazon Indexing Visual Reference',
                desc: 'Quick visual reference with examples, manual testing guide, expert copywriting insights',
                time: '30 min',
                difficulty: 'Beginner',
                phase: 2,
                path: '03-listing-optimization/SOP-306-Amazon-Indexing-Visual-Reference-Expert-Insights.md'
            },
            '401': {
                category: 'tracking',
                title: 'Rank Radar Setup',
                desc: 'Create and configure keyword tracking to monitor ranking positions',
                time: '20 min',
                difficulty: 'Beginner',
                phase: 2,
                path: '04-keyword-tracking/SOP-401-Rank-Radar-Setup.md'
            },
            '402': {
                category: 'tracking',
                title: 'Weekly Monitoring Routine',
                desc: 'Ongoing keyword position monitoring and performance analysis',
                time: '15 min',
                difficulty: 'Beginner',
                phase: 5,
                path: '04-keyword-tracking/SOP-402-Weekly-Monitoring-Routine.md'
            },
            '501': {
                category: 'troubleshooting',
                title: 'Diagnose Performance Issues',
                desc: 'Identify browse node, indexing, and visibility problems',
                time: '20 min',
                difficulty: 'Intermediate',
                phase: 3,
                path: '05-troubleshooting/SOP-501-Diagnose-Performance-Issues.md'
            },
            '502': {
                category: 'troubleshooting',
                title: 'Fix Common Problems',
                desc: 'Solutions for typical DataDive issues and listing problems',
                time: '30 min',
                difficulty: 'Intermediate',
                phase: 3,
                path: '05-troubleshooting/SOP-502-Fix-Common-Problems.md'
            },
            '602': {
                category: 'images',
                title: 'Product Image Strategy',
                desc: 'Plan WHAT images to create, photography briefs, 7-image framework',
                time: '180 min',
                difficulty: 'Intermediate',
                phase: 2,
                path: '06-image-creation/SOP-602-Product-Image-Strategy.md'
            },
            'AI-Guide': {
                category: 'images',
                title: 'AI Image Creation Guide',
                desc: 'HOW to create main/secondary images with ChatGPT 4o',
                time: '180 min',
                difficulty: 'Intermediate',
                phase: 2,
                path: '06-image-creation/AI-Image-Creation-Guide.html'
            },
            '701': {
                category: 'analysis',
                title: 'Amazon Product Competitive Analyzer',
                desc: 'AI-powered product viability analysis, 8-factor scoring, GO/NO-GO decisions',
                time: '3 min',
                difficulty: 'Intermediate',
                phase: 1,
                path: '07-product-analysis/SOP-701-Amazon-Product-Competitive-Analyzer.md'
            },
            '702': {
                category: 'analysis',
                title: 'Optimization Validation Procedure',
                desc: 'Verify optimization implementation, validate results, quality assurance',
                time: '40 min',
                difficulty: 'Intermediate',
                phase: 2,
                path: '07-product-analysis/SOP-702-Optimization-Validation-Procedure.md'
            },
            '801': {
                category: 'prelaunch',
                title: 'Prohibited Keywords List',
                desc: 'Compliance reference for banned keywords by category',
                time: 'Reference',
                difficulty: 'Beginner',
                phase: 3,
                path: '08-pre-launch/SOP-801-Prohibited-Keywords-List.md'
            },
            '802': {
                category: 'prelaunch',
                title: 'Suppressed Listing Creation',
                desc: 'Create suppressed listing to preserve honeymoon period before inventory arrives',
                time: '40 min',
                difficulty: 'Intermediate',
                phase: 3,
                path: '08-pre-launch/SOP-802-Suppressed-Listing-Creation.md'
            },
            '803': {
                category: 'prelaunch',
                title: 'Packaging Requirements',
                desc: 'Supplier coordination, barcodes, labels, FBA compliance',
                time: '90 min',
                difficulty: 'Intermediate',
                phase: 3,
                path: '08-pre-launch/SOP-803-Packaging-Requirements.md'
            },
            '901': {
                category: 'launch',
                title: 'Launch Day Procedures',
                desc: 'Complete launch day timeline, activate listing, PPC, traffic generation',
                time: 'Full day',
                difficulty: 'Advanced',
                phase: 4,
                path: '09-launch/SOP-901-Launch-Day-Procedures.md'
            },
            '1001': {
                category: 'ppc',
                title: 'PPC Launch and Optimization',
                desc: 'Campaign structure, bid management, optimization schedule',
                time: '180 min',
                difficulty: 'Advanced',
                phase: 4,
                path: '10-ppc/SOP-1001-PPC-Launch-Optimization.md'
            },
            '1101': {
                category: 'postlaunch',
                title: 'Keyword Indexing',
                desc: 'Verify keywords indexed, browse nodes, troubleshooting post-launch',
                time: '45 min',
                difficulty: 'Intermediate',
                phase: 5,
                path: '11-post-launch/SOP-1101-Keyword-Indexing.md'
            },
            '1102': {
                category: 'postlaunch',
                title: 'Post-Launch A/B Testing',
                desc: 'Test images, pricing, bullets after launch for continuous improvement',
                time: 'Ongoing',
                difficulty: 'Advanced',
                phase: 5,
                path: '11-post-launch/SOP-1102-Post-Launch-Testing.md'
            }
        };

        // Phase definitions with training materials
        const phases = [
            {
                id: 1,
                name: 'Phase 1: Foundation & Research',
                icon: 'üèóÔ∏è',
                items: [
                    { type: 'training', id: 'datadive-setup' },
                    { type: 'sop', id: '101' },
                    { type: 'sop', id: '201' },
                    { type: 'training', id: 'datadive-scorecard' },
                    { type: 'sop', id: '202' },
                    { type: 'training', id: 'datadive-walkthrough' },
                    { type: 'sop', id: '203' },
                    { type: 'sop', id: '701' }
                ]
            },
            {
                id: 2,
                name: 'Phase 2: Listing Optimization',
                icon: '‚öôÔ∏è',
                items: [
                    { type: 'sop', id: '301' },
                    { type: 'sop', id: '302' },
                    { type: 'training', id: 'datadive-listing-training' },
                    { type: 'training', id: 'datadive-listing-builder' },
                    { type: 'sop', id: '303' },
                    { type: 'sop', id: '304' },
                    { type: 'sop', id: '305' },
                    { type: 'sop', id: '306' },
                    { type: 'training', id: 'datadive-rank-radar' },
                    { type: 'sop', id: '401' },
                    { type: 'training', id: 'chatgpt-image-creation' },
                    { type: 'sop', id: '602' },
                    { type: 'sop', id: 'AI-Guide' },
                    { type: 'sop', id: '702' }
                ]
            },
            {
                id: 3,
                name: 'Phase 3: Launch Preparation',
                icon: 'üéØ',
                items: [
                    { type: 'sop', id: '801' },
                    { type: 'sop', id: '802' },
                    { type: 'sop', id: '803' },
                    { type: 'training', id: 'datadive-troubleshooting' },
                    { type: 'sop', id: '501' },
                    { type: 'sop', id: '502' }
                ]
            },
            {
                id: 4,
                name: 'Phase 4: Going Live',
                icon: 'üöÄ',
                items: [
                    { type: 'sop', id: '901' },
                    { type: 'sop', id: '1001' }
                ]
            },
            {
                id: 5,
                name: 'Phase 5: Post-Launch Optimization',
                icon: 'üìà',
                items: [
                    { type: 'sop', id: '402' },
                    { type: 'sop', id: '1101' },
                    { type: 'sop', id: '1102' },
                    { type: 'training', id: 'datadive-training-notes' }
                ]
            }
        ];

        // Navigation
        document.querySelectorAll('.nav-item[data-view]').forEach(item => {
            item.addEventListener('click', () => {
                document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
                item.classList.add('active');

                const viewId = item.dataset.view;
                document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
                document.getElementById(viewId).classList.add('active');
            });
        });

        // Training files database
        const trainingDatabase = {
            'datadive-setup': {
                title: 'DataDive Account Setup',
                pdfPath: '02-DataDive-Training/DataDive-Account-Setup.pdf',
                mdPath: '02-DataDive-Training/DataDive-Account-Setup.md'
            },
            'datadive-scorecard': {
                title: 'Product Validation Scorecard',
                pdfPath: '02-DataDive-Training/DataDive-Product-Validation-Scorecard.pdf',
                mdPath: '02-DataDive-Training/DataDive-Product-Validation-Scorecard.md'
            },
            'datadive-walkthrough': {
                title: 'Product Validation Walkthrough',
                pdfPath: '02-DataDive-Training/DataDive-Product-Validation-Walkthrough.pdf',
                mdPath: '02-DataDive-Training/DataDive-Product-Validation-Walkthrough.md'
            },
            'datadive-listing-training': {
                title: 'Listing Builder Training',
                pdfPath: '02-DataDive-Training/DataDive-Listing-Builder-Training.pdf',
                mdPath: '02-DataDive-Training/DataDive-Listing-Builder-Training.md'
            },
            'datadive-listing-builder': {
                title: 'Listing Builder Reference Guide',
                pdfPath: '02-DataDive-Training/DataDive-Listing-Builder.pdf',
                mdPath: '02-DataDive-Training/DataDive-Listing-Builder.md'
            },
            'datadive-rank-radar': {
                title: 'Rank Radar Training',
                pdfPath: '02-DataDive-Training/DataDive-Rank-Radar-Training.pdf',
                mdPath: '02-DataDive-Training/DataDive-Rank-Radar-Training.md'
            },
            'datadive-training-notes': {
                title: 'Complete Training Notes',
                pdfPath: '02-DataDive-Training/DataDive-Training-Notes.pdf',
                mdPath: '02-DataDive-Training/DataDive-Training-Notes.md'
            },
            'datadive-troubleshooting': {
                title: 'Troubleshooting & Diagnostics',
                pdfPath: '02-DataDive-Training/DataDive-Troubleshooting-Diagnostics.pdf',
                mdPath: '02-DataDive-Training/DataDive-Troubleshooting-Diagnostics.md'
            },
            'chatgpt-image-creation': {
                title: 'ChatGPT 4o Image Creation',
                pdfPath: '02-DataDive-Training/ChatGPT-40-Amazon-Image-Creation.pdf',
                mdPath: '02-DataDive-Training/ChatGPT-40-Amazon-Image-Creation.md'
            }
        };

        // Open SOP - Opens the actual markdown file
        function openSOP(sopId) {
            const sop = sopsDatabase[sopId];
            if (!sop) {
                alert('SOP not found');
                return;
            }

            // Use relative path ‚Äî works both locally (file://) and on GitHub Pages (https://)
            // SOP .md files ‚Üí open as .pdf (PDFs are deployed; .md files are not rendered by browsers)
            const filePath = sop.path.endsWith('.html')
                ? `../01-SOPs/${sop.path}`
                : `../01-SOPs/${sop.path.replace(/\.md$/, '.pdf')}`;

            window.open(filePath, '_blank');
            console.log(`Opened SOP-${sopId}: ${sop.title}`);
        }

        // Open Training PDF - Opens the PDF version
        function openTraining(trainingId) {
            const training = trainingDatabase[trainingId];
            if (!training) {
                alert('Training file not found');
                return;
            }

            // Use relative path ‚Äî works both locally (file://) and on GitHub Pages (https://)
            window.open(`../${training.pdfPath}`, '_blank');
            console.log(`Opened Training PDF: ${training.title}`);
        }

        // Open Training MD - Opens the PDF version (MD files not renderable in browser)
        function openTrainingMD(trainingId) {
            const training = trainingDatabase[trainingId];
            if (!training) {
                alert('Training file not found');
                return;
            }

            // Use relative path ‚Äî opens PDF since .md files don't render in browsers
            window.open(`../${training.pdfPath}`, '_blank');
            console.log(`Opened Training PDF: ${training.title}`);
        }

        // Render SOP Library
        function renderSOPLibrary() {
            const container = document.getElementById('sop-grid');
            container.innerHTML = '';

            Object.entries(sopsDatabase).forEach(([id, sop]) => {
                const card = document.createElement('div');
                card.className = 'sop-card';
                card.dataset.category = sop.category;
                card.dataset.title = sop.title.toLowerCase();

                card.innerHTML = `
                    <div class="sop-status">üìÑ</div>
                    <div class="sop-number">SOP-${id}</div>
                    <div class="sop-title">${sop.title}</div>
                    <div class="sop-desc">${sop.desc}</div>
                    <div class="sop-meta">
                        <span class="meta-tag time">‚è±Ô∏è ${sop.time}</span>
                        <span class="meta-tag difficulty">‚≠ê ${sop.difficulty}</span>
                        <span class="meta-tag phase">Phase ${sop.phase}</span>
                    </div>
                    <div class="sop-actions">
                        <button class="btn" onclick="openSOP('${id}')">Open SOP ‚Üí</button>
                    </div>
                `;

                container.appendChild(card);
            });
        }

        // Filter SOPs
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');

                const filter = btn.dataset.filter;
                const cards = document.querySelectorAll('.sop-card');

                cards.forEach(card => {
                    if (filter === 'all') {
                        card.style.display = 'block';
                    } else {
                        card.style.display = card.dataset.category === filter ? 'block' : 'none';
                    }
                });
            });
        });

        // Search SOPs
        document.getElementById('sop-search').addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const cards = document.querySelectorAll('.sop-card');

            cards.forEach(card => {
                const title = card.dataset.title;
                const text = card.textContent.toLowerCase();

                if (title.includes(searchTerm) || text.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        });

        // Render Learning Path
        function renderLearningPath() {
            const container = document.getElementById('phases-container');

            phases.forEach(phase => {
                const phaseCard = document.createElement('div');
                phaseCard.className = 'phase-card';

                // Build the items HTML
                const itemsHTML = phase.items.map(item => {
                    if (item.type === 'sop') {
                        const sop = sopsDatabase[item.id];
                        if (!sop) return '';
                        return `
                            <div class="sop-card" style="cursor: pointer; transition: all 0.3s ease;">
                                <div class="sop-status">üìÑ</div>
                                <div class="sop-number">SOP-${item.id}</div>
                                <div class="sop-title">${sop.title}</div>
                                <div class="sop-desc" style="color: var(--text-muted); font-size: 0.9rem; margin: 0.5rem 0;">${sop.desc}</div>
                                <div class="sop-meta">
                                    <span class="meta-tag time">‚è±Ô∏è ${sop.time}</span>
                                    <span class="meta-tag difficulty">‚≠ê ${sop.difficulty}</span>
                                </div>
                                <div class="sop-actions" style="margin-top: 1rem;">
                                    <button class="btn" onclick="openSOP('${item.id}'); event.stopPropagation();">Open SOP ‚Üí</button>
                                </div>
                            </div>
                        `;
                    } else if (item.type === 'training') {
                        const training = trainingDatabase[item.id];
                        if (!training) return '';
                        return `
                            <div class="sop-card" style="cursor: pointer; transition: all 0.3s ease; border: 2px solid rgba(139, 92, 246, 0.3);">
                                <div class="sop-status" style="background: linear-gradient(135deg, var(--purple), var(--pink)); box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);">üéì</div>
                                <div class="sop-number" style="color: var(--purple);">TRAINING</div>
                                <div class="sop-title">${training.title}</div>
                                <div class="sop-desc" style="color: var(--text-muted); font-size: 0.9rem; margin: 0.5rem 0;">DataDive training material - complete walkthrough and reference guide</div>
                                <div class="sop-actions" style="margin-top: 1rem; display: flex; gap: 0.5rem;">
                                    <button class="btn" onclick="openTraining('${item.id}'); event.stopPropagation();" style="flex: 1;">üìÑ PDF</button>
                                    <button class="btn btn-secondary" onclick="openTrainingMD('${item.id}'); event.stopPropagation();" style="flex: 1;">üìù MD</button>
                                </div>
                            </div>
                        `;
                    }
                    return '';
                }).join('');

                phaseCard.innerHTML = `
                    <div class="phase-header">
                        <div class="phase-title">
                            ${phase.icon} ${phase.name}
                        </div>
                        <div style="color: var(--text-muted);">${phase.items.length} items</div>
                    </div>
                    <div class="phase-body">
                        <div class="sop-grid">
                            ${itemsHTML}
                        </div>
                    </div>
                `;

                container.appendChild(phaseCard);
            });
        }

        // Initialize
        renderSOPLibrary();
        renderLearningPath();

        // ===== INTERACTIVE TOOLS JAVASCRIPT =====

        // Decision Tree Logic
        let decisionData = {
            competition: '',
            brand: ''
        };

        function nextStep(step) {
            document.querySelector(`#step${step - 1}`).classList.add('hidden');
            document.querySelector(`#step${step}`).classList.remove('hidden');
        }

        function prevStep(step) {
            document.querySelectorAll('.decision-step').forEach(s => s.classList.add('hidden'));
            document.querySelector(`#step${step}`).classList.remove('hidden');
        }

        function selectOption(field, value) {
            decisionData[field] = value;

            // Visual feedback
            const options = event.target.closest('.decision-options').querySelectorAll('.decision-option');
            options.forEach(opt => opt.classList.remove('selected'));
            event.target.closest('.decision-option').classList.add('selected');
        }

        function calculateDecision() {
            const productName = document.getElementById('product-name').value;
            const price = parseFloat(document.getElementById('selling-price').value);
            const cost = parseFloat(document.getElementById('product-cost').value);
            const fees = parseFloat(document.getElementById('amazon-fees').value);

            const profit = price - cost - fees;
            const margin = (profit / price) * 100;

            let resultHTML = '';

            // Decision logic based on product validation scorecard
            if (margin >= 16 && decisionData.competition !== 'high' && decisionData.brand !== 'required') {
                resultHTML = `
                    <div class="result-card">
                        <div class="result-header">
                            ‚úÖ STRONG GO - Launch This Product!
                        </div>
                        <div style="font-size: 1.1rem; margin-top: 1rem;">
                            <strong>${productName}</strong> meets all criteria for success:
                        </div>
                        <ul class="result-list">
                            <li><strong>${margin.toFixed(1)}% margin</strong> - Well above the 16% threshold</li>
                            <li><strong>$${profit.toFixed(2)} profit per unit</strong></li>
                            <li>Competition level: <strong>${decisionData.competition || 'favorable'}</strong></li>
                            <li>Brand approval: <strong>${decisionData.brand === 'no' ? 'Not required' : 'Manageable'}</strong></li>
                        </ul>
                        <div class="tip-box" style="margin-top: 2rem;">
                            <div class="tip-title">üéØ Next Steps</div>
                            <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
                                <li>Complete competitive analysis (SOP-202)</li>
                                <li>Optimize listing with keyword research (SOP-302)</li>
                                <li>Plan launch strategy using SOP-901</li>
                            </ul>
                        </div>
                    </div>
                `;
            } else if (margin >= 15) {
                resultHTML = `
                    <div class="result-card warning">
                        <div class="result-header">
                            ‚ö†Ô∏è CONDITIONAL GO - Proceed with Caution
                        </div>
                        <div style="font-size: 1.1rem; margin-top: 1rem;">
                            <strong>${productName}</strong> is viable but has some concerns:
                        </div>
                        <ul class="result-list">
                            <li><strong>${margin.toFixed(1)}% margin</strong> - Just above minimum 15%</li>
                            <li><strong>$${profit.toFixed(2)} profit per unit</strong></li>
                            <li>Consider: ${decisionData.competition === 'high' ? 'High competition may hurt rankings' : 'Competition is manageable'}</li>
                            <li>Consider: ${decisionData.brand === 'required' ? 'Brand approval required - potential blocker' : 'No brand issues'}</li>
                        </ul>
                        <div class="tip-box" style="margin-top: 2rem;">
                            <div class="tip-title">‚ö° Strategic Considerations</div>
                            <div>Proceed only if you have strategic advantages: existing supplier relationship, unique differentiator, or learning opportunity. See DataDive Scorecard training for the 8-factor evaluation.</div>
                        </div>
                    </div>
                `;
            } else {
                resultHTML = `
                    <div class="result-card danger">
                        <div class="result-header">
                            ‚ùå NO GO - Don't Launch
                        </div>
                        <div style="font-size: 1.1rem; margin-top: 1rem;">
                            <strong>${productName}</strong> doesn't meet profitability requirements:
                        </div>
                        <ul class="result-list">
                            <li><strong>${margin.toFixed(1)}% margin</strong> - Below the 15% minimum threshold</li>
                            <li><strong>$${profit.toFixed(2)} profit per unit</strong> - Too thin for sustainability</li>
                            <li>Risk: Margins this low leave no room for PPC, returns, or price competition</li>
                        </ul>
                        <div class="tip-box" style="margin-top: 2rem;">
                            <div class="tip-title">üí° Training Insight</div>
                            <div><strong>What can you do?</strong></div>
                            <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
                                <li>Negotiate better supplier pricing (reduce product cost)</li>
                                <li>Optimize freight allocation (flat-rate vs. cubic)</li>
                                <li>Consider different product variation with better margins</li>
                                <li>Move on to a different product opportunity</li>
                            </ul>
                        </div>
                    </div>
                `;
            }

            document.getElementById('decision-result').innerHTML = resultHTML;
            document.querySelector('#step6').classList.add('hidden');
        }

        // Drag and Drop for Ranking Juice
        function allowDrop(ev) {
            ev.preventDefault();
        }

        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
        }

        function drop(ev) {
            ev.preventDefault();
            const data = ev.dataTransfer.getData("text");
            const element = document.getElementById(data);

            const dropZone = ev.target.closest('.keywords-container');
            if (dropZone) {
                dropZone.appendChild(element);
                calculateRankingJuice();
            }
        }

        function calculateRankingJuice() {
            let titleJuice = 0;
            let bulletsJuice = 0;
            let descriptionJuice = 0;

            // Calculate for each zone - matches SOP-304 Listing Builder methodology
            document.querySelectorAll('[data-zone="title"] .keyword-chip').forEach(chip => {
                titleJuice += parseInt(chip.dataset.volume) * 10;
            });

            document.querySelectorAll('[data-zone="bullets"] .keyword-chip').forEach(chip => {
                bulletsJuice += parseInt(chip.dataset.volume) * 5;
            });

            document.querySelectorAll('[data-zone="description"] .keyword-chip').forEach(chip => {
                descriptionJuice += parseInt(chip.dataset.volume) * 1;
            });

            const totalJuice = titleJuice + bulletsJuice + descriptionJuice;

            document.getElementById('title-juice').textContent = titleJuice.toLocaleString();
            document.getElementById('bullets-juice').textContent = bulletsJuice.toLocaleString();
            document.getElementById('description-juice').textContent = descriptionJuice.toLocaleString();
            document.getElementById('total-juice').textContent = totalJuice.toLocaleString();
        }

        // Initial calculation for ranking juice
        calculateRankingJuice();

        // Margin Calculator
        const calcPrice = document.getElementById('calc-price');
        const calcCost = document.getElementById('calc-cost');
        const calcFees = document.getElementById('calc-fees');
        const calcFreight = document.getElementById('calc-freight');

        function updateMarginCalculator() {
            const price = parseFloat(calcPrice.value);
            const cost = parseFloat(calcCost.value);
            const fees = parseFloat(calcFees.value);
            const freight = parseFloat(calcFreight.value);

            const totalCost = cost + fees + freight;
            const profit = price - totalCost;
            const margin = (profit / price) * 100;

            // Update displays
            document.getElementById('calc-price-display').textContent = price.toFixed(2);
            document.getElementById('calc-cost-display').textContent = cost.toFixed(2);
            document.getElementById('calc-fees-display').textContent = fees.toFixed(2);
            document.getElementById('calc-freight-display').textContent = freight.toFixed(2);

            document.getElementById('calc-margin').textContent = margin.toFixed(1) + '%';

            document.getElementById('breakdown-price').textContent = price.toFixed(2);
            document.getElementById('breakdown-cost').textContent = cost.toFixed(2);
            document.getElementById('breakdown-fees').textContent = fees.toFixed(2);
            document.getElementById('breakdown-freight').textContent = freight.toFixed(2);
            document.getElementById('breakdown-profit').textContent = profit.toFixed(2);

            // Update status and color based on Product Validation Scorecard thresholds
            const marginValue = document.getElementById('calc-margin');
            const statusEl = document.getElementById('calc-status');

            if (margin >= 16) {
                marginValue.style.background = 'linear-gradient(135deg, var(--success), #14b8a6)';
                marginValue.style.webkitBackgroundClip = 'text';
                marginValue.style.webkitTextFillColor = 'transparent';
                statusEl.textContent = '‚úÖ STRONG GO - Above 16% threshold!';
                statusEl.style.background = 'linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(6, 182, 212, 0.2))';
            } else if (margin >= 15) {
                marginValue.style.background = 'linear-gradient(135deg, var(--warning), var(--orange))';
                marginValue.style.webkitBackgroundClip = 'text';
                marginValue.style.webkitTextFillColor = 'transparent';
                statusEl.textContent = '‚ö†Ô∏è CONDITIONAL GO - Consider strategic value';
                statusEl.style.background = 'linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(249, 115, 22, 0.2))';
            } else {
                marginValue.style.background = 'linear-gradient(135deg, var(--danger), #dc2626)';
                marginValue.style.webkitBackgroundClip = 'text';
                marginValue.style.webkitTextFillColor = 'transparent';
                statusEl.textContent = '‚ùå NO GO - Below 15% minimum';
                statusEl.style.background = 'linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(220, 38, 38, 0.2))';
            }
        }

        calcPrice.addEventListener('input', updateMarginCalculator);
        calcCost.addEventListener('input', updateMarginCalculator);
        calcFees.addEventListener('input', updateMarginCalculator);
        calcFreight.addEventListener('input', updateMarginCalculator);

        updateMarginCalculator();

        // Add Custom Keyword to Ranking Juice Lab
        let customKeywordCounter = 100;

        function addCustomKeyword() {
            const keywordInput = document.getElementById('custom-keyword-input');
            const volumeInput = document.getElementById('custom-keyword-volume');

            const keyword = keywordInput.value.trim();
            const volume = parseInt(volumeInput.value) || 2000;

            if (!keyword) {
                alert('Please enter a keyword phrase');
                return;
            }

            // Create a new draggable keyword chip
            const newChip = document.createElement('div');
            newChip.className = 'keyword-chip';
            newChip.draggable = true;
            newChip.id = `custom-kw${customKeywordCounter++}`;
            newChip.dataset.volume = volume;
            newChip.textContent = keyword;
            newChip.ondragstart = drag;

            // Add it to the description pool by default (users can drag it wherever)
            const descriptionContainer = document.querySelector('[data-zone="description"]');
            descriptionContainer.appendChild(newChip);

            // Clear the inputs
            keywordInput.value = '';
            volumeInput.value = '2000';

            // Recalculate juice
            calculateRankingJuice();

            // Focus back on the input for easy multiple additions
            keywordInput.focus();
        }

        // Allow Enter key to add keyword
        document.getElementById('custom-keyword-input')?.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addCustomKeyword();
            }
        });

        // Algorithm Simulator Functions
        const defaultListingText = {
            title: "Premium Pool Filter Replacement Cartridge - Compatible with Intex Type A - Easy Clean Reusable Filter",
            bullets: "‚Ä¢ Universal pool filter compatible with most Intex pools<br>‚Ä¢ Easy to install replacement filter cartridge<br>‚Ä¢ Reusable and washable for long-lasting pool maintenance<br>‚Ä¢ Premium filtration keeps your swimming pool crystal clear<br>‚Ä¢ Cost-effective alternative to disposable pool filters",
            description: "Keep your above ground pool sparkling clean with our high-quality filter system. This spa and pool cleaning accessory is designed for maximum water filtration efficiency. Perfect for pool owners who want crystal clear water without constantly replacing cartridges."
        };

        function analyzeIndexing() {
            // Get listing content
            const title = document.getElementById('sim-title').textContent;
            const bullets = document.getElementById('sim-bullets').textContent;
            const description = document.getElementById('sim-description').textContent;

            // Extract keywords (simple word extraction - words 3+ chars)
            function extractKeywords(text) {
                const words = text.toLowerCase()
                    .replace(/[^\w\s]/g, ' ')
                    .split(/\s+/)
                    .filter(word => word.length >= 3);
                return words;
            }

            // Get phrases (2-3 word combinations)
            function extractPhrases(text) {
                const words = text.toLowerCase()
                    .replace(/[^\w\s]/g, ' ')
                    .split(/\s+/)
                    .filter(word => word.length >= 3);

                const phrases = [];
                for (let i = 0; i < words.length - 1; i++) {
                    phrases.push(words[i] + ' ' + words[i + 1]);
                    if (i < words.length - 2) {
                        phrases.push(words[i] + ' ' + words[i + 1] + ' ' + words[i + 2]);
                    }
                }
                return phrases;
            }

            const titleWords = [...extractKeywords(title), ...extractPhrases(title)];
            const bulletsWords = [...extractKeywords(bullets), ...extractPhrases(bullets)];
            const descriptionWords = [...extractKeywords(description), ...extractPhrases(description)];

            // Count keyword occurrences and calculate ranking power
            const keywordIndex = {};

            function indexKeyword(keyword, location, weight) {
                if (!keywordIndex[keyword]) {
                    keywordIndex[keyword] = {
                        keyword: keyword,
                        locations: [],
                        weight: 0,
                        power: 0
                    };
                }

                if (!keywordIndex[keyword].locations.includes(location)) {
                    keywordIndex[keyword].locations.push(location);
                }

                keywordIndex[keyword].weight = Math.max(keywordIndex[keyword].weight, weight);
                keywordIndex[keyword].power += weight;
            }

            // Index all keywords
            titleWords.forEach(kw => indexKeyword(kw, 'Title', 10));
            bulletsWords.forEach(kw => indexKeyword(kw, 'Bullets', 5));
            descriptionWords.forEach(kw => indexKeyword(kw, 'Description', 1));

            // Sort by ranking power
            const sortedKeywords = Object.values(keywordIndex)
                .sort((a, b) => b.power - a.power)
                .slice(0, 20); // Top 20 keywords

            // Calculate total ranking score
            const totalScore = sortedKeywords.reduce((sum, kw) => sum + kw.power, 0);

            // Display results
            document.getElementById('total-ranking-score').textContent = totalScore.toLocaleString();

            const resultsBody = document.getElementById('index-results-body');
            resultsBody.innerHTML = '';

            sortedKeywords.forEach(kw => {
                const row = document.createElement('tr');

                const weightClass = kw.weight >= 10 ? 'weight-high' :
                                  kw.weight >= 5 ? 'weight-medium' : 'weight-low';

                row.innerHTML = `
                    <td><strong>${kw.keyword}</strong></td>
                    <td>${kw.locations.join(', ')}</td>
                    <td><span class="weight-indicator ${weightClass}">${kw.weight}x</span></td>
                    <td><strong>${kw.power}</strong></td>
                `;

                resultsBody.appendChild(row);
            });

            // Show results
            document.getElementById('indexing-results').style.display = 'block';

            // Scroll to results
            document.getElementById('indexing-results').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function resetListing() {
            document.getElementById('sim-title').textContent = defaultListingText.title;
            document.getElementById('sim-bullets').innerHTML = defaultListingText.bullets;
            document.getElementById('sim-description').textContent = defaultListingText.description;

            // Hide results
            document.getElementById('indexing-results').style.display = 'none';
        }
    </script>
</body>
</html>
